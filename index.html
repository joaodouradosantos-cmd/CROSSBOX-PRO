<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CrossBox</title>

  
  <link rel="stylesheet" href="./css/fonts.css" />
<meta name="theme-color" content="#f2f2f2" />
  <link rel="manifest" href="manifest.json?v=2" />

  <link rel="apple-touch-icon" sizes="180x180" href="imagens/crossbox_logo-512.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="CrossBox">
  <meta name="application-name" content="CrossBox">

  <!-- Fonte militar -->
<script src="./js/chart.umd.min.js"></script>

  <style>
    :root {
      font-family: system-ui, sans-serif;
      color-scheme: light;
    }

    body {
      background:
        /* RISCOS ESCUROS TIPO ARRANH√ïES */
        repeating-linear-gradient(
          145deg,
          rgba(18, 22, 15, 0.95) 0px,
          rgba(18, 22, 15, 0.95) 120px,
          rgba(12, 13, 10, 1) 121px,
          rgba(12, 13, 10, 1) 132px
        ),
        /* MANCHAS OLIVA / LAMA */
        radial-gradient(circle at 12% 0%, rgba(116, 128, 76, 0.55) 0, transparent 55%),
        radial-gradient(circle at 85% 100%, rgba(140, 110, 60, 0.45) 0, transparent 60%),
        /* FUNDO PRINCIPAL VERDE TROPA ESCURO */
        linear-gradient(to bottom, #4f5b32 0%, #262f1c 40%, #141710 100%);

      color: #111;
      display: flex;
      justify-content: center;
      min-height: 100vh;
      background-attachment: fixed;
    }

    .app {
      width: 100%;
      max-width: 900px;
      padding: 8px;
      box-sizing: border-box;
    }

    /* HEADER SEM CAIXA PRETA */
    header {
      position: sticky;
      top: 0;
      z-index: 999;
      background: transparent;
      padding: 10px 4px 4px;
      margin-bottom: 8px;
    }

    .header-row {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    #appLogo {
      max-width: 120px;
      height: auto;
      margin: 0;
      display: block;
    }

/* BLOCO DO T√çTULO EM 2 LINHAS */
.subtitle-block {
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;   /* CENTRA as duas linhas */
  text-align: center;    /* texto centrado */
  cursor: pointer;
  font-family: "Stardos Stencil", system-ui, sans-serif;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  text-shadow: 0 2px 3px rgba(0, 0, 0, 0.7);
  transform-origin: center center;
  transition: transform 0.1s ease;
}

.subtitle-block:hover {
  transform: translateY(-1px);
}

.subtitle-line-1 {
  font-size: 0.85rem;
  color: #e0e5d8;
}

.subtitle-line-2 {
  font-size: 1.1rem;
  color: #fefce8;
  margin-top: -1px;
  border-bottom: 2px solid rgba(254, 252, 232, 0.85);
  padding-bottom: 0px;
  /* removido o align-self para n√£o empurrar a 2.¬™ linha para a esquerda */
}

    .card {
      background: #e1e1e1;
      background-image:
        linear-gradient(135deg, rgba(255, 255, 255, 0.18), rgba(180, 180, 180, 0.12)),
        repeating-linear-gradient(
          135deg,
          rgba(0, 0, 0, 0.09) 0px,
          rgba(0, 0, 0, 0.09) 1px,
          transparent 1px,
          transparent 4px
        );
      border-radius: 14px;
      padding: 14px;
      margin-bottom: 16px;
      border: 1px solid #9d9d9d;
      box-shadow:
        0 4px 10px rgba(0, 0, 0, 0.35),
        inset 0 0 0 1px rgba(255, 255, 255, 0.06);
    }

    /* PERFIL SEM ‚ÄúCART√ÉO‚Äù VIS√çVEL */
    #perfil.card {
      background: transparent;
      border: none;
      box-shadow: none;
      padding: 0;
      margin-bottom: 6px;
    }

    #perfilForm {
      display: none;
      margin-bottom: 8px;
    }

    .form-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 8px;
    }

    .field {
      flex: 1;
      min-width: 140px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

     label {
     font-size: 0.8rem;
     color: #2b2b2b;
     text-transform: uppercase;
     letter-spacing: 0.05em;
   }

    /* Labels mais claros s√≥ no formul√°rio de perfil */
    #perfilForm label {
     color: #fefce8;
   }
    
    input,
    select,
    textarea,
    button {
      padding: 10px;
      border-radius: 10px;
      background: #f8f8f8;
      color: #222;
      border: 1px solid #b7b7b7;
      font-size: 0.9rem;
      box-sizing: border-box;
      font-family: inherit;
    }

    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: #22c55e;
      box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.25);
    }

    /* BOT√ÉO PRINCIPAL ‚Äì ESTILO GUERRA SUJA */
    .btn-primary {
      background:
        linear-gradient(145deg, #1f7b3a, #0f4220);
      border: 1px solid #050806;
      color: #f4f4f4;
      font-weight: 700;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      box-shadow:
        0 3px 0 #050806,
        inset 0 0 0 1px rgba(255, 255, 255, 0.04);
      position: relative;
      overflow: hidden;
    }

    .btn-primary::after {
      content: "";
      position: absolute;
      inset: 0;
      background-image:
        repeating-linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.08) 0px,
          rgba(255, 255, 255, 0.08) 1px,
          transparent 1px,
          transparent 4px
        );
      mix-blend-mode: soft-light;
      opacity: 0.32;
      pointer-events: none;
    }

    .btn-primary:active {
      transform: translateY(1px);
      box-shadow:
        0 1px 0 #050806,
        inset 0 0 0 1px rgba(0, 0, 0, 0.3);
    }

    /* BOT√ïES SECUND√ÅRIOS ‚Äì RISCADOS / BATTLE WORN */
    .btn-secondary {
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid #303030;
      background:
        linear-gradient(145deg, #3b3f3a, #202320);
      color: #f2f2f2;
      font-size: 0.8rem;
      cursor: pointer;
      white-space: nowrap;
      text-transform: uppercase;
      letter-spacing: 0.07em;
      box-shadow:
        0 3px 0 #050807,
        inset 0 0 0 1px rgba(255, 255, 255, 0.03);
      position: relative;
      overflow: hidden;
    }

    .btn-secondary::before {
      content: "";
      position: absolute;
      inset: 0;
      background-image:
        repeating-linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.07) 0px,
          rgba(255, 255, 255, 0.07) 1px,
          transparent 1px,
          transparent 5px
        );
      mix-blend-mode: soft-light;
      opacity: 0.28;
      pointer-events: none;
    }

    .btn-secondary:active {
      transform: translateY(1px);
      box-shadow: 0 1px 0 #050807;
    }

    /* BOT√ÉO APAGAR ‚Äì MANTIDO MAS MAIS ‚ÄúBRUTO‚Äù */
    .btn-delete {
      padding: 2px 4px;
      border-radius: 999px;
      border: 1px solid #3b0505;
      background:
        linear-gradient(145deg, #b93333, #7a1515);
      color: #ffffff;
      font-size: 0.75rem;
      cursor: pointer;
      box-shadow: 0 2px 0 #2a0202;
    }

    .btn-delete:hover {
      background: linear-gradient(145deg, #ef4444, #b91c1c);
    }

    .helper-text {
      margin-top: 4px;
      font-size: 0.8rem;
      color: #222;
    }
    /* Resumo r√°pido do WOD (chips) */
.stats-row {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  margin: 6px 0 4px;
}

.stat-chip {
  flex: 1 1 calc(50% - 6px);
  min-width: 140px;
  padding: 6px 8px;
  border-radius: 999px;
  background: #d7d7d7;
  border: 1px solid #b5b5b5;
  font-size: 0.75rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  box-sizing: border-box;
}

.stat-chip span:first-child {
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.stat-chip span:last-child {
  font-weight: 500;
}

    .tabs {
      display: flex;
      gap: 8px;
      margin: 10px 0 14px 0;
    }

    .tab-btn {
      flex: 1;
      padding: 10px 0;
      border-radius: 999px;
      border: 1px solid #202320;
      background:
        linear-gradient(145deg, #32372f, #21241f);
      color: #f1f1f1;
      cursor: pointer;
      font-size: 0.9rem;
      box-shadow:
        0 4px 0 #050806,
        inset 0 0 0 1px rgba(255, 255, 255, 0.04);
      transition:
        transform 0.1s ease,
        box-shadow 0.1s ease,
        background 0.1s ease,
        border-color 0.1s ease,
        color 0.1s ease;
      text-transform: uppercase;
      letter-spacing: 0.09em;
      position: relative;
      overflow: hidden;
    }

    .tab-btn::before {
      content: "";
      position: absolute;
      inset: 0;
      background-image:
        repeating-linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.08) 0px,
          rgba(255, 255, 255, 0.08) 1px,
          transparent 1px,
          transparent 4px
        );
      mix-blend-mode: soft-light;
      opacity: 0.3;
      pointer-events: none;
    }

    .tab-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 5px 0 #040605;
    }

    .tab-btn.active {
      background:
        linear-gradient(145deg, #1f7b3a, #0f4220);
      border-color: #0b2614;
      color: #ffffff;
      font-weight: 700;
      transform: translateY(2px);
      box-shadow: 0 2px 0 #041207;
    }

    .section { display: none; }
    .section.active { display: block; }

    .options-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
    }

    .opt-btn {
      width: 100%;
      text-align: left;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
    }

    .opt-emoji {
      font-size: 1.4rem;
    }

    .option-section {
      display: none;
    }

    .option-section.active {
      display: block;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
      color: #111;
    }

    th,
    td {
      padding: 6px;
      text-align: center;
      border-bottom: 1px solid #d9d9d9;
      white-space: nowrap;
    }

    th {
      background: #d5d5d5;
      color: #222;
      position: sticky;
      top: 0;
      z-index: 1;
    }

    .scroll {
      max-height: 260px;
      overflow: auto;
      border-radius: 10px;
      border: 1px solid #b5b5b5;
      background: #f0f0f0;
    }

    #backupInfo {
      margin-top: 6px;
      font-size: 0.75rem;
      color: #222;
    }

    /* REMOVER RISCOS APENAS NO CARD "REGISTO E HIST√ìRICO" */
    #opt-wod .card:nth-of-type(2) {
      background-image: none !important;
      background-color: #e1e1e1 !important;
    }
    /* ============================
   MELHORIA DO ECR√É DO GUIA DE EXERC√çCIOS
   (s√≥ mexe no aspecto dentro do #opt-guia)
   ============================ */

/* Aumentar a altura √∫til do guia ‚Äì usa quase o ecr√£ todo */
/* WOD do dia ‚Äì mais alto */
#opt-wod #treinoScroll {
  max-height: calc(100vh - 260px);
}

/* Hist√≥rico WOD ‚Äì aproveitar o ecr√£ quase todo */
#opt-historico #dailyHistoryScroll {
  max-height: calc(100vh - 220px);
}

/* Texto mais leg√≠vel na tabela do guia */
#opt-guia table {
  font-size: 0.85rem;
}

#opt-guia th,
#opt-guia td {
  text-align: left;      /* deixa de estar tudo centrado */
  white-space: normal;   /* permite que o texto parta linha */
  vertical-align: top;
}
    
 /* ============================
   FERRAMENTA R√ÅPIDA 1RM ‚Äì VISUAL PRO
   ============================ */

.quick-1rm-card {
  background: #dadada;
  padding-top: 10px;
}

.quick-1rm-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 4px;
}

.quick-1rm-header h3 {
  margin: 0;
  font-size: 0.95rem;
}

.quick-1rm-tag {
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid #166534;
  background: linear-gradient(145deg, #16a34a, #166534);
  color: #f9fafb;
  white-space: nowrap;
}

.quick-1rm-text {
  margin-top: 2px;
  margin-bottom: 8px;
  font-size: 0.8rem;
}

.quick-1rm-grid {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.quick-1rm-col {
  flex: 1 1 220px;
}
    /* Linha com 3 colunas no c√°lculo r√°pido 1RM */
.quick-1rm-row {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  margin-top: 8px;
}

.quick-1rm-row .field-mini {
  flex: 1 1 0;
  min-width: 90px;
}

/* Fica mais compacto no telem√≥vel */
@media (max-width: 600px) {
  .quick-1rm-row .field-mini label {
    font-size: 0.75rem;
  }

  .quick-1rm-row .field-mini input {
    padding: 6px 8px;
  }
}

/* Peso sugerido em destaque */
.quick-1rm-output {
  font-size: 1.4rem;
  font-weight: 700;
  text-align: center;
  background: #fefce8;
  border: 1px solid #a3a3a3;
}

/* Texto da percentagem inversa mais discreto */
#quickPercResult {
  font-size: 0.8rem;
  margin-top: 4px;
}

/* Alinhamento √† esquerda total na tabela 1RM */
#sec-1rm .card:nth-of-type(3) th,
#sec-1rm .card:nth-of-type(3) td {
  text-align: left !important;
}

/* Bot√£o üóë centrado na sua coluna */
#sec-1rm .card:nth-of-type(3) td:last-child {
  text-align: center !important;
  width: 40px;
}

/* Bot√£o üóë continua centrado na pr√≥pria c√©lula */
#sec-1rm .card:nth-of-type(2) td:last-child {
  text-align: center !important;
}
/* Campos do WOD mais compactos no telem√≥vel */
#opt-wod .field label {
  font-size: 0.7rem;
  line-height: 1.1;
}
/* ===== GRELLA 3x2 PARA O WOD ===== */
#opt-wod .wod-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px 10px;
  margin-top: 8px;
}

#opt-wod .wod-grid .field {
  min-width: 0;
}

#opt-wod .field input {
  padding: 6px 8px;      /* em vez de 10px ‚Äì ficam mais baixinhos */
}

/* Placeholder um pouco mais pequeno */
#opt-wod .field input::placeholder {
  font-size: 0.75rem;
}

/* Em ecr√£s pequenos, garantir que as colunas n√£o ficam gigantes */
@media (max-width: 600px) {
  #opt-wod .field {
    min-width: 110px;
  }
}

</style>
</head>
<body>
<div class="app">

  <header>
    <div class="header-row">
      <img id="appLogo" src="imagens/crossbox_logo.png" alt="CrossBox logo">
      <div class="subtitle-block" id="appSubtitle">
        <span class="subtitle-line-1" id="appSubtitleLine1">Registo de treinos</span>
        <span class="subtitle-line-2" id="appSubtitleLine2">Toca para configurar o teu perfil</span>
      </div>
    </div>
  </header>

  <!-- PERFIL -->
  <section class="card" id="perfil">
    <div id="perfilForm">
      <div class="form-row">
        <div class="field">
          <label>Nome</label>
          <input id="nome" type="text" />
        </div>
        <div class="field">
          <label>N√≠vel</label>
          <select id="nivel">
            <option value="">Selecionar</option>
            <option value="iniciante">Iniciante</option>
            <option value="intermedio">Interm√©dio</option>
            <option value="avancado">Avan√ßado</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="field">
          <label>Sexo</label>
          <select id="sexo">
            <option value="">Selecionar</option>
            <option value="homem">Homem</option>
            <option value="mulher">Mulher</option>
          </select>
        </div>
        <div class="field">
          <label>Idade</label>
          <input id="idade" type="number" min="10" max="100" />
        </div>
      </div>

        <div class="form-row">
        <div class="field">
          <label>Altura (cm)</label>
          <input id="altura" type="number" min="100" max="230" />
        </div>
        <div class="field">
          <label>Peso (kg)</label>
          <input id="peso" type="number" step="0.1" min="30" max="250" />
        </div>
      </div>

      <div class="form-row">
        <div class="field">
          <label>Objetivo principal</label>
          <select id="objetivo">
  <option value="">Selecionar</option>
  <option value="condicionamento">Melhorar condicionamento</option>
  <option value="forca_absoluta">Aumentar for√ßa absoluta</option>
  <option value="potencia">Desenvolver pot√™ncia / explos√£o</option>
  <option value="resistencia_muscular">Melhorar resist√™ncia muscular</option>
  <option value="recomposicao">Perder massa gorda / recomposi√ß√£o</option>
  <option value="massa_funcional">Ganho de massa magra funcional</option>
  <option value="longevidade">Manter forma e longevidade</option>
  <option value="competicao">Prepara√ß√£o para competi√ß√£o / RX</option>
</select>

        </div>
      </div>

      <button class="btn-primary" id="saveProfile">Guardar perfil</button>

    </div>
  </section>

  <!-- TABS PRINCIPAIS -->
  <div class="tabs">
    <button class="tab-btn active" data-target="sec-1rm">1RM</button>
    <button class="tab-btn" data-target="sec-opcoes">WOD & Tools</button>
  </div>

  <!-- SEC√á√ÉO 1: 1RM -->
<section id="sec-1rm" class="section active">

  <!-- CARD 1: REGISTO / ATUALIZA√á√ÉO DO 1RM -->
  <div class="card">
    <h3 style="margin-top:0; margin-bottom:8px;">1RM ‚Äì Registo</h3>

    <div class="form-row">
      <div class="field">
        <label>Exerc√≠cio</label>
        <select id="exercise"></select>
      </div>

      <div class="field">
        <label>1RM (kg) ‚Äì peso m√°ximo numa repeti√ß√£o</label>
        <input id="oneRm" type="number" step="0.5" />
      </div>
    </div>

    <button class="btn-primary" id="addBtn">Guardar / Atualizar</button>

    <div class="helper-text" style="margin-top:6px;">
      Aqui registas apenas o teu 1RM por exerc√≠cio. As percentagens e c√°lculos r√°pidos passam a ser usados diretamente no WOD.
    </div>
  </div>
        <!-- FERRAMENTA R√ÅPIDA 1RM (estilo GUIA, tudo vertical e est√°vel) -->
        <div class="card">
    <h3 style="margin-top:0; margin-bottom:8px;">C√°lculo r√°pido (% ‚Üî kg)</h3>

    <div class="helper-text" style="margin-bottom:8px;">
      Introduz a percentagem ou o peso, e v√™ o valor correspondente com base no teu 1RM.
    </div>

    <!-- 1.¬™ linha: exerc√≠cio (igual) -->
    <div class="field">
      <label>Exerc√≠cio</label>
      <select id="quickExercise"></select>
    </div>

    <!-- 2.¬™ linha: 3 colunas -->
    <div class="quick-1rm-row">
      <div class="field field-mini">
        <label>% 1RM</label>
        <input id="quickPercent" type="number" min="10" max="130" step="1" />
      </div>

      <div class="field field-mini">
        <label>Peso (kg)</label>
        <input id="quickPeso" type="text" readonly />
      </div>

      <div class="field field-mini">
        <label>Peso (kg)</label>
        <input id="quickPesoInput" type="number" step="0.5" min="0" />
      </div>
    </div>

    <!-- Texto que explica a percentagem ‚Üî peso -->
    <div class="helper-text" id="quickPercResult"></div>
  </div>

  <!-- CARD 2: TABELA COMPLETA DO 1RM -->
  <div class="card">
    <div class="scroll">
      <table>
        <thead>
  <tr>
    <th style="width:55%; text-align:left;">Exerc√≠cio</th>
    <th style="width:40%; text-align:left;">1RM &amp; hist√≥rico</th>
    <th style="width:5%;"></th>
  </tr>
</thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>
  </div>

</section>

  <!-- SEC√á√ÉO 2: OP√á√ïES -->
  <section id="sec-opcoes" class="section">

    <div class="card">
    <div class="options-grid">

  <button class="btn-secondary opt-btn" data-target="opt-wod">
    <span class="opt-emoji">üü©</span>
    <span>WOD</span>
  </button>

  <!-- OBJETIVO ‚Üí opt-calc -->
  <button class="btn-secondary opt-btn" data-target="opt-calc">
    <span class="opt-emoji">üìä</span>
    <span>OBJETIVO</span>
  </button>

  <!-- GR√ÅFICO ‚Üí opt-graficos -->
  <button class="btn-secondary opt-btn" data-target="opt-graficos">
    <span class="opt-emoji">üìâ</span>
    <span>GR√ÅFICO</span>
  </button>

  <!-- DESEMPENHO ‚Üí opt-performance -->
  <button class="btn-secondary opt-btn" data-target="opt-performance">
    <span class="opt-emoji">ü•á</span>
    <span>DESEMPENHO</span>
  </button>

  <button class="btn-secondary opt-btn" data-target="opt-guia">
    <span class="opt-emoji">üìö</span>
    <span>EXERC√çCIOS</span>
  </button>

  <button class="btn-secondary opt-btn" data-target="opt-backup">
    <span class="opt-emoji">üíæ</span>
    <span>BACKUP</span>
  </button>

  <!-- RESERVAS ‚Üí sec-reservas -->
  <button class="btn-secondary opt-btn" data-target="sec-reservas">
    <span class="opt-emoji">üìÖ</span>
    <span>RESERVAS</span>
  </button>

  <button class="btn-secondary opt-btn" data-target="opt-historico">
    <span class="opt-emoji">üìú</span>
    <span>HIST√ìRICO</span>
  </button>

</div>
           
           <!-- WOD -->
    <section id="opt-wod" class="option-section active">
      <div class="card">
        <h3 style="margin-top:0; margin-bottom:8px;">üü© WOD</h3>

              <!-- LINHA 1: data / procura / exerc√≠cio -->
        <div class="form-row">
          <div class="field">
            <label>Data</label>
            <input id="treinoData" type="date" />
          </div>
          <div class="field">
            <label>Procurar exerc√≠cio</label>
            <input id="treinoExercicioSearch" type="text" placeholder="Nome EN/PT." />
          </div>
          <div class="field">
            <label>Exerc√≠cio</label>
            <select id="treinoExercicio"></select>
          </div>
        </div>

                <!-- LINHA 2: parte / formato / estrutura do bloco -->
        <div class="form-row">
          <div class="field">
            <label>Parte</label>
            <select id="treinoParte">
              <option value="">‚Äî</option>
              <option value="A">A</option>
              <option value="B">B</option>
              <option value="C">C</option>
              <option value="D">D</option>
              <option value="Outro">Outro</option>
            </select>
          </div>

          <div class="field">
            <label>Formato</label>
            <select id="treinoFormato">
              <option value="">‚Äî</option>
              <option value="For Time">For Time</option>
              <option value="AMRAP">AMRAP</option>
              <option value="EMOM">EMOM</option>
              <option value="A cada X‚Ä≤ √ó Y">A cada X‚Ä≤ √ó Y</option>
              <option value="Intervalos 2‚Ä≤ on / 2‚Ä≤ off">2‚Ä≤ on / 2‚Ä≤ off</option>
              <option value="Chipper">Chipper</option>
              <option value="Carga total">Carga total</option>
            </select>
          </div>

        <!-- GRELLA 3x2 DO WOD -->
        <div class="wod-grid">
          <div class="field">
            <label>S√©ries</label>
            <input id="treinoRondas" type="number" min="1" />
          </div>

          <div class="field">
            <label>Repeti√ß√µes</label>
            <input id="treinoReps" type="number" min="1" />
          </div>

          <div class="field">
            <label>Peso kg</label>
            <input id="treinoPeso" type="number" step="0.5" min="0" />
          </div>

          <div class="field">
            <label>%1RM</label>
            <input id="treinoPercent" type="number" min="10" max="130" step="1" />
          </div>

          <div class="field">
            <label>Tempo</label>
            <input id="treinoTempo" type="text" placeholder="Ex.: 12:35, 20', AMRAP 10'..." />
          </div>

          <div class="field">
            <label>Dist√¢ncia (km)</label>
            <input id="treinoDist" type="number" step="0.01" min="0" />
          </div>
        </div>

          <div class="helper-text" id="treinoPercentInfo" style="margin-top:-4px; margin-bottom:4px;">
        </div>

        <button class="btn-primary" id="treinoAdd">Adicionar ao WOD</button>
        <div class="helper-text">
        A carga de cada exerc√≠cio (kg) √© calculada como: peso √ó repeti√ß√µes √ó rondas.
        A dist√¢ncia em metcon √© somada √† parte, em km.
        </div>
<!-- Resultado global do WOD -->
<div class="form-row" style="margin-top:10px;">
  <div class="field">
    <label>Resultado do WOD</label>
    <select id="treinoResultado">
      <option value="">‚Äî Selecionar ‚Äî</option>
      <option value="rx">Fiz tudo conforme o quadro (RX)</option>
      <option value="adaptado">Fiz tudo mas adaptei cargas/skills</option>
      <option value="incompleto">N√£o conclu√≠ todos os exerc√≠cios</option>
    </select>
  </div>
</div>

<hr style="margin:10px 0 6px; border:none; border-top:1px solid #b5b5b5;">

<div class="card">
         <h3 style="margin-top:0; margin-bottom:8px;">Registo do dia</h3>
  
        <!-- Resumo r√°pido do dia (sempre vis√≠vel) -->
        <div class="helper-text" id="treinoResumo" style="margin-bottom:4px;"></div>
        <div class="helper-text" id="treinoSugestao" style="margin-top:0; font-weight:500;"></div>
        <div class="helper-text" id="weeklyHistory" style="margin-top:4px;" style="margin-top:4px; display:none;"></div>

        <!-- Resumo r√°pido em chips -->
        <div id="treinoStats" class="stats-row" style="display:none;">
          <div class="stat-chip">
            <span>Carga total</span>
            <span id="statCarga">0 kg</span>
          </div>
          <div class="stat-chip">
            <span>Exerc√≠cios</span>
            <span id="statExercicios">0</span>
          </div>
          <div class="stat-chip" id="statTempoChip">
            <span>Melhor tempo</span>
            <span id="statTempo">‚Äì</span>
          </div>
          <div class="stat-chip">
            <span>Volume</span>
            <span id="statVolume">0 reps</span>
          </div>
        </div>

            
        <!-- WOD do dia ‚Äì compacto e f√°cil de ler -->
        <h4 style="margin-top:10px; margin-bottom:4px;">WOD do dia</h4>
        <div class="scroll" id="treinoScroll">
          <table>
            <thead>
              <tr>
                <th>Data</th>
                <th>Parte</th>
                <th>Formato</th>
                <th>Exerc√≠cio</th>
                <th>Tipo</th>
                <th>Rondas</th>
                <th>Reps</th>
                <th>Peso</th>
                <th>% 1RM</th>
                <th>Tempo</th>
                <th>Dist√¢ncia (km)</th>
                <th>Carga (kg)</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="treinoBody"></tbody>
          </table>
        </div>
       </div>
      </section>
    <!-- HIST√ìRICO WOD ‚Äì NOVA SEC√á√ÉO -->
<section id="opt-historico" class="option-section">
  <div class="card">
    <h3 style="margin-top:0; margin-bottom:8px;">üìú Hist√≥rico WOD</h3>
    <p class="helper-text">
      Lista completa de todos os treinos registados, ordenados da data mais recente para a mais antiga.
    </p>

    <div style="margin-top:10px; display:flex; gap:8px; flex-wrap:wrap;">
      <button id="printHistoryBtn" class="btn-primary" type="button">üñ®Ô∏è Exportar / Imprimir</button>
    </div>


    <div class="scroll" id="dailyHistoryScroll">
      <table>
        <thead>
          <tr>
            <th>Data</th>
            <th>Parte</th>
            <th>Formato</th>
            <th>Exerc√≠cio</th>
            <th>Tipo</th>
            <th>Rondas</th>
            <th>Reps</th>
            <th>Peso</th>
            <th>% 1RM</th>
            <th>Tempo</th>
            <th>Dist√¢ncia (km)</th>
            <th>Carga (kg)</th>
            <th></th> <!-- lixo -->
          </tr>
        </thead>
        <tbody id="dailyHistoryBody"></tbody>
      </table>
    </div>
  </div>
</section>

    <!-- OBJETIVO -->
    <section id="opt-calc" class="option-section">
      <div class="card">
        <h3 style="margin-top:0; margin-bottom:8px;">üßÆ Objetivo</h3>

        <div class="form-row">
          <div class="field">
            <label>Exerc√≠cio</label>
            <select id="calcExercicio"></select>
          </div>
          <div class="field">
            <label>N.¬∫ de repeti√ß√µes planeadas</label>
            <input id="calcReps" type="number" min="1" />
          </div>
        </div>

        <div class="form-row">
          <div class="field">
            <label>Objetivo</label>
            <select id="calcObjetivo">
              <option value="">Autom√°tico</option>
              <option value="forca">For√ßa</option>
              <option value="hipertrofia">Hipertrofia</option>
              <option value="tecnica">T√©cnica / Volume leve</option>
            </select>
          </div>
        </div>

        <div class="form-row">
          <div class="field">
            <label>Peso objetivo (kg ‚Äì opcional)</label>
            <input id="calcTargetKg" type="number" step="0.5" min="0" />
          </div>
          <div class="field">
            <label>Prazo (semanas ‚Äì opcional)</label>
            <input id="calcWeeks" type="number" min="1" />
          </div>
        </div>

        <button class="btn-primary" id="calcBtn">Calcular</button>
        <div class="helper-text" id="calcResultado" style="margin-top:6px;">
          Escolhe um exerc√≠cio, indica o n¬∫ de repeti√ß√µes e, se quiseres, o objetivo (for√ßa / hipertrofia / t√©cnica).
        </div>
      </div>
    </section>

    <!-- GR√ÅFICOS -->
    <section id="opt-graficos" class="option-section">
      <div class="card">
        <h3 style="margin-top:0; margin-bottom:8px;">üìà Gr√°fico de evolu√ß√£o do 1RM</h3>
        <div class="field">
          <label>Exerc√≠cio</label>
          <select id="graphExercise"></select>
        </div>
        <div style="margin-top:8px;">
          <canvas id="rmChart" style="width:100%; max-height:260px;"></canvas>
        </div>
      </div>
    </section>

    <!-- PERFORMANCE -->
    <section id="opt-performance" class="option-section">
      <div class="card">
        <h3 style="margin-top:0; margin-bottom:8px;">üèÖ Performance f√≠sica</h3>
        <p class="helper-text">
          Resumo autom√°tico com base nos teus registos de WOD, 1RM e metcons (carga em kg e dist√¢ncia em km).
        </p>

        <h4 style="margin-top:10px; margin-bottom:4px;">WOD ‚Äì dias com mais carga</h4>
        <div class="scroll">
          <table>
            <thead>
              <tr>
                <th>Data</th>
                <th>Carga total (kg)</th>
                <th>Dist√¢ncia total (km)</th>
                <th>N.¬∫ exerc√≠cios</th>
                <th>Melhor tempo metcon</th>
              </tr>
            </thead>
            <tbody id="perfWodBody"></tbody>
          </table>
        </div>

        <h4 style="margin-top:12px; margin-bottom:4px;">Top 1RM</h4>
        <div class="scroll">
          <table>
            <thead>
              <tr>
                <th>Exerc√≠cio</th>
                <th>1RM</th>
                <th>Rel. peso corporal</th>
              </tr>
            </thead>
            <tbody id="perf1rmBody"></tbody>
          </table>
        </div>

        <h4 style="margin-top:12px; margin-bottom:4px;">Metcon ‚Äì melhores tempos</h4>
        <div class="scroll">
          <table>
            <thead>
              <tr>
                <th>Exerc√≠cio</th>
                <th>Melhor tempo</th>
                <th>Data</th>
                <th>Carga / dist√¢ncia</th>
              </tr>
            </thead>
            <tbody id="perfMetconBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- GUIA EXERC√çCIOS -->
    <section id="opt-guia" class="option-section">
      <div class="card">
        <h3 style="margin-top:0; margin-bottom:8px;">üìö Guia de exerc√≠cios</h3>
        <input id="guiaSearch" type="text" placeholder="Procurar por nome (EN/PT) ou descri√ß√£o..." />
        <div class="scroll" style="margin-top:8px;">
          <table>
            <thead>
              <tr>
                <th>Exerc√≠cio</th>
                <th>Descri√ß√£o</th>
              </tr>
            </thead>
            <tbody id="guiaBody"></tbody>
          </table>
        </div>
      </div>
    </section>

    <!-- BACKUP -->
    <section id="opt-backup" class="option-section">
      <div class="card">
        <h3 style="margin-top:0; margin-bottom:8px;">üíæ Backup de dados</h3>
        <p class="helper-text">
          Exporta um ficheiro com o teu perfil, 1RM, hist√≥rico de WOD e restante informa√ß√£o.
          Podes guardar em Google Drive, iCloud, Ficheiros, etc. Para restaurar noutro telem√≥vel, basta importar o ficheiro.
        </p>
        <div class="form-row">
          <button class="btn-primary" id="exportBackupBtn">Exportar backup</button>
          <button class="btn-secondary" id="importBackupBtn">Importar backup</button>
          <input type="file" id="backupFileInput" accept="application/json" style="display:none;" />
        </div>
        <div id="backupInfo"></div>
      </div>
    </section>

    <!-- RESERVAS & PRESEN√áAS (AGORA DENTRO DO WOD & TOOLS) -->
    <section id="sec-reservas" class="option-section">
      <div class="card">
        <h3 style="margin-top:0; margin-bottom:8px;">üìÜ Reservas & Presen√ßas</h3>

        <div class="form-row">
          <div class="field">
            <label>Data da aula</label>
            <input id="reservaData" type="date" />
          </div>
          <div class="field">
            <label>Hora</label>
            <input id="reservaHora" type="time" />
          </div>
        </div>

        <div class="form-row">
          <div class="field">
            <label>Tipo de aula</label>
            <select id="reservaTipo">
              <option value="">Selecionar</option>
              <option value="WOD">WOD</option>
              <option value="Open Box">Open Box</option>
              <option value="Halterofilismo">Halterofilismo</option>
              <option value="Mobilidade">Mobilidade</option>
              <option value="Competi√ß√£o">Competi√ß√£o</option>
            </select>
          </div>

          <div class="field">
            <label>Nota (opcional)</label>
            <input id="reservaNota" type="text" placeholder="Ex.: parceiro, foco, objetivo do dia..." />
          </div>
        </div>

        <button class="btn-primary" id="reservaAddBtn">Guardar reserva</button>

        <div class="helper-text" style="margin-top:6px;">
          Estas reservas e presen√ßas s√£o pessoais e ficam apenas guardadas neste dispositivo.
        </div>

        <div class="scroll" style="margin-top:10px;">
          <table>
            <thead>
              <tr>
                <th>Data</th>
                <th>Hora</th>
                <th>Aula</th>
                <th>Nota</th>
                <th>Presen√ßa</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="reservasBody"></tbody>
          </table>
        </div>

        <div class="helper-text" id="reservasResumo" style="margin-top:6px;"></div>
      </div>
    </section>

  </section>

</div>


<script src="./app.js" defer></script>
<script>
  if ("serviceWorker" in navigator) {
    window.addEventListener("load", () => {
      navigator.serviceWorker.register("./service-worker.js");
    });
  }
</script>


</body>
</html>




